"use strict";(self.webpackChunkreact_frontend_init=self.webpackChunkreact_frontend_init||[]).push([[5586],{89700:function(Ee,b,t){t.r(b),t.d(b,{default:function(){return Fe}});var W=t(84136),u=t.n(W),U=t(64581),A=t.n(U),K=t(57566),E=t.n(K),B=t(52487),I=t.n(B),O=t(90785),x=t.n(O),a=t(67294),f=t(26058),v=t(71471),D=t(55102),g=t(34041),_=t(47019),ve=t(40411),y=t(78957),j=t(83622),te=t(4393),oe=t(42392),De=t(84567),ye=t(96074),N=t(2487),T=t(66309),se=t(32983),Ce=t(31156),Me=t(17788),S=t(97302),Y=t(51042),Pe=t(88284),Oe=t(82061),Te=t(27484),C=t.n(Te),be=t(33852),on=t.n(be),w=t(72224),le=t(24029),e=t(85893),Ae=f.Z.Header,Be=f.Z.Content,re=v.Z.Title,sn=v.Z.Text,Ie=D.Z.TextArea,J=g.Z.Option,h={high:{color:"red",emoji:"\u{1F525}",text:"\u9AD8"},medium:{color:"orange",emoji:"\u26A1",text:"\u4E2D"},low:{color:"blue",emoji:"\u{1F331}",text:"\u4F4E"}},z={pending:{text:"\u5F85\u5B8C\u6210",color:"processing",icon:"\u26A1\uFE0F"},completed:{text:"\u5DF2\u5B8C\u6210",color:"success",icon:"\u2705"}},Se=function(){var F=(0,a.useState)(!1),d=x()(F,2),c=d[0],k=d[1];return(0,a.useEffect)(function(){var M=function(){k(window.innerWidth<=768)};return M(),window.addEventListener("resize",M),function(){return window.removeEventListener("resize",M)}},[]),c};function Fe(){var ie=(0,a.useState)([]),F=x()(ie,2),d=F[0],c=F[1],k=(0,a.useState)(!0),M=x()(k,2),Re=M[0],ae=M[1],Le=(0,a.useState)(!1),de=x()(Le,2),Ze=de[0],R=de[1],We=(0,a.useState)(C()()),ue=x()(We,2),P=ue[0],_e=ue[1],Ue=_.Z.useForm(),Ke=x()(Ue,1),V=Ke[0],Ne=(0,a.useState)("list"),ce=x()(Ne,2),H=ce[0],$=ce[1],Ye=(0,a.useState)(!1),pe=x()(Ye,2),L=pe[0],we=pe[1],o=Se();(0,a.useEffect)(function(){var i=function(){var n=I()(E()().mark(function s(){var l,p,Z,G,Q,X,q,ee,ne;return E()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,ae(!0),m.next=4,(0,le.p)();case 4:if(l=m.sent,l.data){if(p=Array.isArray(JSON.parse(l.data))?JSON.parse(l.data):[],Z=p.filter(function(r){return r&&typeof r.id=="number"&&typeof r.title=="string"&&typeof r.date=="string"&&["high","medium","low"].includes(r.priority)&&["pending","completed"].includes(r.status)}),Z.length>0)c(Z),localStorage.setItem("todoTasks",JSON.stringify(Z));else if(G=localStorage.getItem("todoTasks"),G)try{Q=JSON.parse(G),X=Array.isArray(Q)?Q.filter(function(r){return r&&typeof r.id=="number"&&typeof r.title=="string"&&typeof r.date=="string"&&["high","medium","low"].includes(r.priority)&&["pending","completed"].includes(r.status)}):[],X.length>0&&c(X)}catch(r){console.error("\u89E3\u6790\u672C\u5730\u5B58\u50A8\u6570\u636E\u5931\u8D25:",r),c([])}}m.next=13;break;case 8:if(m.prev=8,m.t0=m.catch(0),console.error("\u52A0\u8F7D\u4EFB\u52A1\u5931\u8D25:",m.t0),q=localStorage.getItem("todoTasks"),q)try{ee=JSON.parse(q),ne=Array.isArray(ee)?ee.filter(function(r){return r&&typeof r.id=="number"&&typeof r.title=="string"&&typeof r.date=="string"&&["high","medium","low"].includes(r.priority)&&["pending","completed"].includes(r.status)}):[],ne.length>0&&c(ne)}catch(r){console.error("\u89E3\u6790\u672C\u5730\u5B58\u50A8\u6570\u636E\u5931\u8D25:",r),c([])}case 13:return m.prev=13,ae(!1),m.finish(13);case 16:case"end":return m.stop()}},s,null,[[0,8,13,16]])}));return function(){return n.apply(this,arguments)}}();i()},[]),(0,a.useEffect)(function(){var i=function(){var n=I()(E()().mark(function s(){return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,le.l)({todoData:d});case 3:localStorage.setItem("todoTasks",JSON.stringify(d)),p.next=9;break;case 6:p.prev=6,p.t0=p.catch(0),console.error("\u4FDD\u5B58\u4EFB\u52A1\u5931\u8D25:",p.t0);case 9:case"end":return p.stop()}},s,null,[[0,6]])}));return function(){return n.apply(this,arguments)}}();d.length>0&&i()},[d]);var me=function(){V.resetFields(),V.setFieldsValue({date:C()()}),R(!0)},Je=function(n){var s={id:Date.now(),title:n.title,description:n.description,date:n.date.format("YYYY-MM-DD"),priority:n.priority,status:"pending",note:n.note,bgColor:"rgb(255, 240, 240)"};c([].concat(A()(d),[s])),R(!1)},ze=function(n){c(d.map(function(s){return s.id===n?u()(u()({},s),{},{status:"completed"}):s}))},ke=function(n){c(d.map(function(s){return s.id===n?u()(u()({},s),{},{status:"pending"}):s}))},Ve=function(n){c(d.filter(function(s){return s.id!==n}))},He=function(n,s){c(d.map(function(l){return l.id===n?u()(u()({},l),{},{note:s}):l}))},$e=function(n,s){c(d.map(function(l){return l.id===n?u()(u()({},l),{},{bgColor:s}):l}))},Ge=(0,a.useState)(null),xe=x()(Ge,2),Qe=xe[0],he=xe[1],Xe=(0,a.useState)(null),fe=x()(Xe,2),qe=fe[0],je=fe[1],ge=d.filter(function(i){if(L){var n=C()(i.date),s=P.startOf("month"),l=P.endOf("month");return n.isAfter(s)&&n.isBefore(l)}return C()(i.date).format("YYYY-MM-DD")===P.format("YYYY-MM-DD")}),en=function(n){var s=n.format("YYYY-MM-DD");return d.filter(function(l){return l.date===s})},nn=function(n){var s=en(n);return(0,e.jsx)("ul",{className:"events",style:{listStyle:"none",padding:0,margin:0},children:s.map(function(l){return(0,e.jsx)("li",{children:(0,e.jsx)(ve.Z,{color:h[l.priority].color,status:l.status==="completed"?"success":"processing",text:l.title.length>6?"".concat(l.title.substring(0,6),"..."):l.title})},l.id)})})},tn=function(n){_e(n),$("list")};return(0,e.jsxs)(f.Z,{style:{minHeight:"100vh",background:"#f5f5f5"},children:[(0,e.jsx)(Ae,{style:{background:"#fff",padding:"0 20px",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",height:o?"auto":"64px"},children:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"stretch":"center",padding:o?"12px 0":"0",gap:o?"12px":"0"},children:[(0,e.jsx)(re,{level:4,style:{margin:0,fontSize:o?"18px":"20px"},children:(0,e.jsx)("span",{children:"\u{1F50A}:\u4ECA\u5929\u4E5F\u8981\u52A0\u6CB9\u9E2D\u{1F4AA}"})}),(0,e.jsxs)(y.Z,{style:{display:"flex",flexWrap:"wrap",gap:"8px",width:o?"100%":"auto"},children:[(0,e.jsx)(j.ZP,{type:H==="list"?"primary":"default",icon:(0,e.jsx)(S.Z,{}),onClick:function(){return $("list")},style:{flex:o?"1":"none",minWidth:o?"0":"auto"},children:"\u5217\u8868\u89C6\u56FE"}),(0,e.jsx)(j.ZP,{type:H==="calendar"?"primary":"default",icon:(0,e.jsx)(S.Z,{}),onClick:function(){return $("calendar")},style:{flex:o?"1":"none",minWidth:o?"0":"auto"},children:"\u65E5\u5386\u89C6\u56FE"}),(0,e.jsx)(j.ZP,{type:"primary",icon:(0,e.jsx)(Y.Z,{}),onClick:me,style:{flex:o?"1":"none",minWidth:o?"0":"auto"},children:"\u6DFB\u52A0\u4EFB\u52A1"})]})]})}),(0,e.jsx)(Be,{style:{padding:o?"12px":"24px"},children:H==="list"?(0,e.jsxs)(te.Z,{children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"flex-start":"center",gap:o?"12px":"0",marginBottom:20},children:[(0,e.jsxs)(re,{level:4,style:{margin:0,fontSize:o?"18px":"20px"},children:[(0,e.jsx)(S.Z,{})," ",L?"".concat(P.format("YYYY\u5E74MM\u6708")," \u7684\u4EFB\u52A1"):"".concat(P.format("YYYY\u5E74MM\u6708DD\u65E5")," \u7684\u4EFB\u52A1")]}),(0,e.jsxs)(y.Z,{style:{width:o?"100%":"auto"},children:[(0,e.jsx)(oe.default,{value:P,onChange:_e,locale:w.Z,allowClear:!1,style:{width:o?"100%":"auto"}}),(0,e.jsx)(De.Z,{checked:L,onChange:function(n){return we(n.target.checked)},style:{marginLeft:o?"0":"8px"},children:"\u663E\u793A\u6574\u6708\u4EFB\u52A1"})]})]}),(0,e.jsx)(ye.Z,{}),ge.length>0?(0,e.jsx)(N.Z,{itemLayout:"horizontal",dataSource:ge,renderItem:function(n){return(0,e.jsxs)(N.Z.Item,{actions:[n.status==="pending"?(0,e.jsx)(j.ZP,{style:{backgroundColor:"#52c41a",borderColor:"#52c41a",color:"#fff",boxShadow:"0 2px 4px rgba(111, 207, 151, 0.5)",borderRadius:"6px",padding:"4px 12px",height:"32px",marginBottom:o?"8px":0,width:o?"100%":"auto"},type:"primary",icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){return ze(n.id)},children:"\u5B8C\u6210"},"complete"):(0,e.jsx)(j.ZP,{style:{backgroundColor:"#1890ff",borderColor:"#1890ff",color:"#fff",boxShadow:"0 2px 4px rgba(24, 144, 255, 0.5)",borderRadius:"6px",padding:"4px 12px",height:"32px",marginBottom:o?"8px":0,width:o?"100%":"auto"},type:"primary",icon:(0,e.jsx)(S.Z,{}),onClick:function(){return ke(n.id)},children:"\u56DE\u6EDA"},"rollback"),(0,e.jsx)(j.ZP,{type:"text",danger:!0,icon:(0,e.jsx)(Oe.Z,{}),onClick:function(){return Ve(n.id)},style:{padding:"4px 12px",height:"32px",width:o?"100%":"auto"},children:"\u5220\u9664"},"delete")],style:{background:"#fff",marginBottom:"12px",padding:o?"12px":"16px",borderRadius:"8px",boxShadow:n.status==="completed"?"0 2px 8px rgba(0,0,0,0.02)":"0 2px 8px rgba(0,0,0,0.04)",opacity:n.status==="completed"?.85:1,transition:"all 0.3s ease",border:n.status==="completed"?"1px solid rgba(82, 196, 26, 0.1)":"1px solid transparent",flexDirection:o?"column":"row",alignItems:o?"flex-start":"center"},children:[(0,e.jsx)(N.Z.Item.Meta,{style:{flex:1,marginBottom:o?"12px":0,width:"100%"},title:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:o?"14px":"16px",fontWeight:n.status==="completed"?400:500,color:n.status==="completed"?"#8c8c8c":"#333"},children:[n.status==="completed"?(0,e.jsx)("span",{style:{color:"#52c41a",fontSize:o?"16px":"18px"},children:z.completed.icon}):(0,e.jsx)("span",{style:{fontSize:o?"16px":"18px"},children:h[n.priority].emoji}),(0,e.jsx)("span",{style:{wordBreak:"break-all"},children:n.title}),(0,e.jsxs)(T.Z,{color:h[n.priority].color,style:{borderRadius:"4px",padding:"0 8px",height:"24px",lineHeight:"22px",opacity:n.status==="completed"?.7:1,fontSize:o?"12px":"14px"},children:[h[n.priority].text,"\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:z[n.status].color,style:{borderRadius:"4px",padding:"0 8px",height:"24px",lineHeight:"22px",fontSize:o?"12px":"14px"},children:z[n.status].text})]}),L&&(0,e.jsx)("span",{style:{color:"#8c8c8c",fontSize:o?"12px":"14px",marginLeft:"26px"},children:C()(n.date).format("YYYY-MM-DD")})]}),description:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"12px",alignItems:"flex-start"},children:[n.description&&(0,e.jsxs)("div",{style:{fontSize:o?"12px":"14px",lineHeight:"1.6",color:n.status==="completed"?"#8c8c8c":"#666",wordBreak:"break-all",padding:"8px 12px",backgroundColor:n.bgColor||"rgb(255, 240, 240)",borderRadius:"4px",minHeight:"80px",whiteSpace:"pre-wrap",width:"80%",marginLeft:"26px",position:"relative"},children:[n.description,(0,e.jsxs)("div",{onClick:function(){return je(n.id)},style:{position:"absolute",right:"8px",top:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{children:"\u{1F3A8}"}),qe===n.id&&(0,e.jsx)("input",{type:"color",value:n.bgColor||"rgb(255, 240, 240)",onChange:function(l){return $e(n.id,l.target.value)},onBlur:function(){return je(null)},style:{width:"24px",height:"24px",border:"none",padding:0,cursor:"pointer"}})]})]}),(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},children:(0,e.jsx)("div",{style:{position:"relative",flex:1,maxWidth:"80%",marginLeft:"26px"},children:Qe===n.id?(0,e.jsx)(D.Z,{placeholder:"\u6DFB\u52A0\u5907\u6CE8...",value:n.note||"",onChange:function(l){return He(n.id,l.target.value)},onBlur:function(){return he(null)},autoFocus:!0,style:{width:"100%",fontSize:o?"12px":"14px",border:"1px solid #d9d9d9",borderRadius:"4px",padding:"4px 8px",transition:"all 0.3s ease",backgroundColor:"#fff"}}):(0,e.jsx)("div",{onClick:function(){return he(n.id)},style:{width:"100%",fontSize:o?"12px":"14px",padding:"4px 8px",color:n.note?"#8c8c8c":"#d9d9d9",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",border:"1px solid transparent",borderRadius:"4px",transition:"all 0.3s ease"},onMouseEnter:function(l){l.currentTarget.style.border="1px solid #d9d9d9",l.currentTarget.style.backgroundColor="#fafafa"},onMouseLeave:function(l){l.currentTarget.style.border="1px solid transparent",l.currentTarget.style.backgroundColor="transparent"},children:n.note?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u{1F4DD}"}),(0,e.jsx)("span",{children:n.note})]}):(0,e.jsx)("span",{children:"\u6DFB\u52A0\u5907\u6CE8..."})})})})]})}),o&&(0,e.jsx)("div",{style:{width:"100%",height:"1px"}})]},n.id)}}):(0,e.jsx)(se.Z,{description:(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)("p",{style:{marginBottom:"8px",color:"#8c8c8c"},children:"\u4ECA\u5929\u90FD\u6CA1\u6709\u5F85\u529E\u4EFB\u52A1\u5594\uFF5E"}),(0,e.jsxs)(j.ZP,{type:"primary",onClick:me,children:[(0,e.jsx)(Y.Z,{})," \u6DFB\u52A0\u4E0B\u4EFB\u52A1\u5427"]})]}),image:se.Z.PRESENTED_IMAGE_SIMPLE,style:{margin:"40px 0"}})]}):(0,e.jsx)(te.Z,{children:(0,e.jsx)(Ce.Z,{locale:w.Z,dateCellRender:nn,onSelect:tn})})}),(0,e.jsx)(Me.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{})," \u6DFB\u52A0\u65B0\u4EFB\u52A1"]}),open:Ze,onCancel:function(){return R(!1)},footer:null,children:(0,e.jsxs)(_.Z,{form:V,layout:"vertical",onFinish:Je,initialValues:{priority:"medium",date:C()()},children:[(0,e.jsx)(_.Z.Item,{name:"title",label:"\u4EFB\u52A1\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u6807\u9898"}],children:(0,e.jsx)(D.Z,{placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u6807\u9898",maxLength:50})}),(0,e.jsx)(_.Z.Item,{name:"description",label:"\u4EFB\u52A1\u63CF\u8FF0",children:(0,e.jsx)(Ie,{placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u63CF\u8FF0\uFF08\u9009\u586B\uFF09",autoSize:{minRows:3,maxRows:6},maxLength:200})}),(0,e.jsx)(_.Z.Item,{name:"date",label:"\u5F00\u59CB\u65E5\u671F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65E5\u671F"}],children:(0,e.jsx)(oe.default,{style:{width:"100%"},locale:w.Z,allowClear:!1})}),(0,e.jsx)(_.Z.Item,{name:"priority",label:"\u4F18\u5148\u7EA7",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7"}],children:(0,e.jsxs)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7",children:[(0,e.jsx)(J,{value:"high",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)("span",{children:[h.high.emoji," \u9AD8\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:h.high.color,children:"\u7D27\u6025"})]})}),(0,e.jsx)(J,{value:"medium",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)("span",{children:[h.medium.emoji," \u4E2D\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:h.medium.color,children:"\u91CD\u8981"})]})}),(0,e.jsx)(J,{value:"low",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)("span",{children:[h.low.emoji," \u4F4E\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:h.low.color,children:"\u666E\u901A"})]})})]})}),(0,e.jsx)(_.Z.Item,{name:"note",label:"\u5907\u6CE8",children:(0,e.jsx)(D.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF08\u9009\u586B\uFF09",maxLength:100})}),(0,e.jsx)(_.Z.Item,{style:{marginBottom:0,textAlign:"right"},children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(j.ZP,{onClick:function(){return R(!1)},children:"\u53D6\u6D88"}),(0,e.jsx)(j.ZP,{type:"primary",htmlType:"submit",children:"\u6DFB\u52A0"})]})})]})})]})}},24029:function(Ee,b,t){t.d(b,{l:function(){return x},p:function(){return I}});var W=t(57566),u=t.n(W),U=t(84136),A=t.n(U),K=t(52487),E=t.n(K),B=t(82257);function I(f){return O.apply(this,arguments)}function O(){return O=E()(u()().mark(function f(v){return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,B.request)("/api/todo/get",A()({method:"POST"},v||{})));case 1:case"end":return g.stop()}},f)})),O.apply(this,arguments)}function x(f,v){return a.apply(this,arguments)}function a(){return a=E()(u()().mark(function f(v,D){return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,B.request)("/api/todo/save",A()({method:"POST",headers:{"Content-Type":"application/json"},data:v},D||{})));case 1:case"end":return _.stop()}},f)})),a.apply(this,arguments)}}}]);
