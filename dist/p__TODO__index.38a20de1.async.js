"use strict";(self.webpackChunkreact_frontend_init=self.webpackChunkreact_frontend_init||[]).push([[5586],{39565:function(De,A,n){n.r(A),n.d(A,{default:function(){return Fe}});var W=n(79810),u=n.n(W),U=n(63894),B=n.n(U),K=n(95688),D=n.n(K),b=n(76069),I=n.n(b),O=n(52419),h=n.n(O),i=n(67294),f=n(26058),j=n(71471),v=n(55102),g=n(34041),_=n(47019),je=n(40411),y=n(78957),E=n(83622),ne=n(4393),oe=n(42392),ve=n(84567),ye=n(96074),Y=n(2487),T=n(66309),re=n(32983),Ce=n(31156),Me=n(17788),S=n(97302),w=n(51042),Pe=n(88284),Oe=n(82061),Te=n(13860),C=n.n(Te),Ae=n(33852),ot=n.n(Ae),z=n(72224),le=n(53579),e=n(85893),Be=f.Z.Header,be=f.Z.Content,se=j.Z.Title,rt=j.Z.Text,Ie=v.Z.TextArea,N=g.Z.Option,m={high:{color:"red",emoji:"\u{1F525}",text:"\u9AD8"},medium:{color:"orange",emoji:"\u26A1",text:"\u4E2D"},low:{color:"blue",emoji:"\u{1F331}",text:"\u4F4E"}},V={pending:{text:"\u5F85\u5B8C\u6210",color:"processing",icon:"\u26A1\uFE0F"},completed:{text:"\u5DF2\u5B8C\u6210",color:"success",icon:"\u2705"}},Se=function(){var F=(0,i.useState)(!1),d=h()(F,2),c=d[0],H=d[1];return(0,i.useEffect)(function(){var M=function(){H(window.innerWidth<=768)};return M(),window.addEventListener("resize",M),function(){return window.removeEventListener("resize",M)}},[]),c};function Fe(){var ae=(0,i.useState)([]),F=h()(ae,2),d=F[0],c=F[1],H=(0,i.useState)(!0),M=h()(H,2),Re=M[0],ie=M[1],Le=(0,i.useState)(!1),de=h()(Le,2),Ze=de[0],R=de[1],We=(0,i.useState)(C()()),ue=h()(We,2),P=ue[0],_e=ue[1],Ue=_.Z.useForm(),Ke=h()(Ue,1),J=Ke[0],Ye=(0,i.useState)("list"),ce=h()(Ye,2),$=ce[0],G=ce[1],we=(0,i.useState)(!1),pe=h()(we,2),L=pe[0],ze=pe[1],o=Se();(0,i.useEffect)(function(){var a=function(){var t=I()(D()().mark(function r(){var l,p,Z,Q,X,k,q,ee,te;return D()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,ie(!0),x.next=4,(0,le.p)();case 4:if(l=x.sent,l.data){if(p=Array.isArray(JSON.parse(l.data))?JSON.parse(l.data):[],Z=p.filter(function(s){return s&&typeof s.id=="number"&&typeof s.title=="string"&&typeof s.date=="string"&&["high","medium","low"].includes(s.priority)&&["pending","completed"].includes(s.status)}),Z.length>0)c(Z),localStorage.setItem("todoTasks",JSON.stringify(Z));else if(Q=localStorage.getItem("todoTasks"),Q)try{X=JSON.parse(Q),k=Array.isArray(X)?X.filter(function(s){return s&&typeof s.id=="number"&&typeof s.title=="string"&&typeof s.date=="string"&&["high","medium","low"].includes(s.priority)&&["pending","completed"].includes(s.status)}):[],k.length>0&&c(k)}catch(s){console.error("\u89E3\u6790\u672C\u5730\u5B58\u50A8\u6570\u636E\u5931\u8D25:",s),c([])}}x.next=13;break;case 8:if(x.prev=8,x.t0=x.catch(0),console.error("\u52A0\u8F7D\u4EFB\u52A1\u5931\u8D25:",x.t0),q=localStorage.getItem("todoTasks"),q)try{ee=JSON.parse(q),te=Array.isArray(ee)?ee.filter(function(s){return s&&typeof s.id=="number"&&typeof s.title=="string"&&typeof s.date=="string"&&["high","medium","low"].includes(s.priority)&&["pending","completed"].includes(s.status)}):[],te.length>0&&c(te)}catch(s){console.error("\u89E3\u6790\u672C\u5730\u5B58\u50A8\u6570\u636E\u5931\u8D25:",s),c([])}case 13:return x.prev=13,ie(!1),x.finish(13);case 16:case"end":return x.stop()}},r,null,[[0,8,13,16]])}));return function(){return t.apply(this,arguments)}}();a()},[]),(0,i.useEffect)(function(){var a=function(){var t=I()(D()().mark(function r(){return D()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,le.l)({todoData:d});case 3:localStorage.setItem("todoTasks",JSON.stringify(d)),p.next=9;break;case 6:p.prev=6,p.t0=p.catch(0),console.error("\u4FDD\u5B58\u4EFB\u52A1\u5931\u8D25:",p.t0);case 9:case"end":return p.stop()}},r,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}();d.length>0&&a()},[d]);var xe=function(){J.resetFields(),J.setFieldsValue({date:C()()}),R(!0)},Ne=function(t){var r={id:Date.now(),title:t.title,description:t.description,date:t.date.format("YYYY-MM-DD"),priority:t.priority,status:"pending",note:t.note,bgColor:"rgb(255, 240, 240)"};c([].concat(B()(d),[r])),R(!1)},Ve=function(t){c(d.map(function(r){return r.id===t?u()(u()({},r),{},{status:"completed"}):r}))},He=function(t){c(d.map(function(r){return r.id===t?u()(u()({},r),{},{status:"pending"}):r}))},Je=function(t){c(d.filter(function(r){return r.id!==t}))},$e=function(t,r){c(d.map(function(l){return l.id===t?u()(u()({},l),{},{note:r}):l}))},Ge=function(t,r){c(d.map(function(l){return l.id===t?u()(u()({},l),{},{bgColor:r}):l}))},Qe=(0,i.useState)(null),he=h()(Qe,2),Xe=he[0],me=he[1],ke=(0,i.useState)(null),fe=h()(ke,2),qe=fe[0],Ee=fe[1],ge=d.filter(function(a){if(L){var t=C()(a.date),r=P.startOf("month"),l=P.endOf("month");return t.isAfter(r)&&t.isBefore(l)}return C()(a.date).format("YYYY-MM-DD")===P.format("YYYY-MM-DD")}),et=function(t){var r=t.format("YYYY-MM-DD");return d.filter(function(l){return l.date===r})},tt=function(t){var r=et(t);return(0,e.jsx)("ul",{className:"events",style:{listStyle:"none",padding:0,margin:0},children:r.map(function(l){return(0,e.jsx)("li",{children:(0,e.jsx)(je.Z,{color:m[l.priority].color,status:l.status==="completed"?"success":"processing",text:l.title.length>6?"".concat(l.title.substring(0,6),"..."):l.title})},l.id)})})},nt=function(t){_e(t),G("list")};return(0,e.jsxs)(f.Z,{style:{minHeight:"100vh",background:"#f5f5f5"},children:[(0,e.jsx)(Be,{style:{background:"#fff",padding:"0 20px",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",height:o?"auto":"64px"},children:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"stretch":"center",padding:o?"12px 0":"0",gap:o?"12px":"0"},children:[(0,e.jsx)(se,{level:4,style:{margin:0,fontSize:o?"18px":"20px"},children:(0,e.jsx)("span",{children:"\u{1F50A}:\u4ECA\u5929\u4E5F\u8981\u52A0\u6CB9\u9E2D\u{1F4AA}"})}),(0,e.jsxs)(y.Z,{style:{display:"flex",flexWrap:"wrap",gap:"8px",width:o?"100%":"auto"},children:[(0,e.jsx)(E.ZP,{type:$==="list"?"primary":"default",icon:(0,e.jsx)(S.Z,{}),onClick:function(){return G("list")},style:{flex:o?"1":"none",minWidth:o?"0":"auto"},children:"\u5217\u8868\u89C6\u56FE"}),(0,e.jsx)(E.ZP,{type:$==="calendar"?"primary":"default",icon:(0,e.jsx)(S.Z,{}),onClick:function(){return G("calendar")},style:{flex:o?"1":"none",minWidth:o?"0":"auto"},children:"\u65E5\u5386\u89C6\u56FE"}),(0,e.jsx)(E.ZP,{type:"primary",icon:(0,e.jsx)(w.Z,{}),onClick:xe,style:{flex:o?"1":"none",minWidth:o?"0":"auto"},children:"\u6DFB\u52A0\u4EFB\u52A1"})]})]})}),(0,e.jsx)(be,{style:{padding:o?"12px":"24px"},children:$==="list"?(0,e.jsxs)(ne.Z,{children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"flex-start":"center",gap:o?"12px":"0",marginBottom:20},children:[(0,e.jsxs)(se,{level:4,style:{margin:0,fontSize:o?"18px":"20px"},children:[(0,e.jsx)(S.Z,{})," ",L?"".concat(P.format("YYYY\u5E74MM\u6708")," \u7684\u4EFB\u52A1"):"".concat(P.format("YYYY\u5E74MM\u6708DD\u65E5")," \u7684\u4EFB\u52A1")]}),(0,e.jsxs)(y.Z,{style:{width:o?"100%":"auto"},children:[(0,e.jsx)(oe.default,{value:P,onChange:_e,locale:z.Z,allowClear:!1,style:{width:o?"100%":"auto"}}),(0,e.jsx)(ve.Z,{checked:L,onChange:function(t){return ze(t.target.checked)},style:{marginLeft:o?"0":"8px"},children:"\u663E\u793A\u6574\u6708\u4EFB\u52A1"})]})]}),(0,e.jsx)(ye.Z,{}),ge.length>0?(0,e.jsx)(Y.Z,{itemLayout:"horizontal",dataSource:ge,renderItem:function(t){return(0,e.jsxs)(Y.Z.Item,{actions:[t.status==="pending"?(0,e.jsx)(E.ZP,{style:{backgroundColor:"#52c41a",borderColor:"#52c41a",color:"#fff",boxShadow:"0 2px 4px rgba(111, 207, 151, 0.5)",borderRadius:"6px",padding:"4px 12px",height:"32px",marginBottom:o?"8px":0,width:o?"100%":"auto"},type:"primary",icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){return Ve(t.id)},children:"\u5B8C\u6210"},"complete"):(0,e.jsx)(E.ZP,{style:{backgroundColor:"#1890ff",borderColor:"#1890ff",color:"#fff",boxShadow:"0 2px 4px rgba(24, 144, 255, 0.5)",borderRadius:"6px",padding:"4px 12px",height:"32px",marginBottom:o?"8px":0,width:o?"100%":"auto"},type:"primary",icon:(0,e.jsx)(S.Z,{}),onClick:function(){return He(t.id)},children:"\u56DE\u6EDA"},"rollback"),(0,e.jsx)(E.ZP,{type:"text",danger:!0,icon:(0,e.jsx)(Oe.Z,{}),onClick:function(){return Je(t.id)},style:{padding:"4px 12px",height:"32px",width:o?"100%":"auto"},children:"\u5220\u9664"},"delete")],style:{background:"#fff",marginBottom:"12px",padding:o?"12px":"16px",borderRadius:"8px",boxShadow:t.status==="completed"?"0 2px 8px rgba(0,0,0,0.02)":"0 2px 8px rgba(0,0,0,0.04)",opacity:t.status==="completed"?.85:1,transition:"all 0.3s ease",border:t.status==="completed"?"1px solid rgba(82, 196, 26, 0.1)":"1px solid transparent",flexDirection:o?"column":"row",alignItems:o?"flex-start":"center"},children:[(0,e.jsx)(Y.Z.Item.Meta,{style:{flex:1,marginBottom:o?"12px":0,width:"100%"},title:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:o?"14px":"16px",fontWeight:t.status==="completed"?400:500,color:t.status==="completed"?"#8c8c8c":"#333"},children:[t.status==="completed"?(0,e.jsx)("span",{style:{color:"#52c41a",fontSize:o?"16px":"18px"},children:V.completed.icon}):(0,e.jsx)("span",{style:{fontSize:o?"16px":"18px"},children:m[t.priority].emoji}),(0,e.jsx)("span",{style:{wordBreak:"break-all"},children:t.title}),(0,e.jsxs)(T.Z,{color:m[t.priority].color,style:{borderRadius:"4px",padding:"0 8px",height:"24px",lineHeight:"22px",opacity:t.status==="completed"?.7:1,fontSize:o?"12px":"14px"},children:[m[t.priority].text,"\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:V[t.status].color,style:{borderRadius:"4px",padding:"0 8px",height:"24px",lineHeight:"22px",fontSize:o?"12px":"14px"},children:V[t.status].text})]}),L&&(0,e.jsx)("span",{style:{color:"#8c8c8c",fontSize:o?"12px":"14px",marginLeft:"26px"},children:C()(t.date).format("YYYY-MM-DD")})]}),description:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"12px",alignItems:"flex-start"},children:[t.description&&(0,e.jsxs)("div",{style:{fontSize:o?"12px":"14px",lineHeight:"1.6",color:t.status==="completed"?"#8c8c8c":"#666",wordBreak:"break-all",padding:"8px 12px",backgroundColor:t.bgColor||"rgb(255, 240, 240)",borderRadius:"4px",minHeight:"80px",whiteSpace:"pre-wrap",width:"80%",marginLeft:"26px",position:"relative"},children:[t.description,(0,e.jsxs)("div",{onClick:function(){return Ee(t.id)},style:{position:"absolute",right:"8px",top:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{children:"\u{1F3A8}"}),qe===t.id&&(0,e.jsx)("input",{type:"color",value:t.bgColor||"rgb(255, 240, 240)",onChange:function(l){return Ge(t.id,l.target.value)},onBlur:function(){return Ee(null)},style:{width:"24px",height:"24px",border:"none",padding:0,cursor:"pointer"}})]})]}),(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},children:(0,e.jsx)("div",{style:{position:"relative",flex:1,maxWidth:"80%",marginLeft:"26px"},children:Xe===t.id?(0,e.jsx)(v.Z,{placeholder:"\u6DFB\u52A0\u5907\u6CE8...",value:t.note||"",onChange:function(l){return $e(t.id,l.target.value)},onBlur:function(){return me(null)},autoFocus:!0,style:{width:"100%",fontSize:o?"12px":"14px",border:"1px solid #d9d9d9",borderRadius:"4px",padding:"4px 8px",transition:"all 0.3s ease",backgroundColor:"#fff"}}):(0,e.jsx)("div",{onClick:function(){return me(t.id)},style:{width:"100%",fontSize:o?"12px":"14px",padding:"4px 8px",color:t.note?"#8c8c8c":"#d9d9d9",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",border:"1px solid transparent",borderRadius:"4px",transition:"all 0.3s ease"},onMouseEnter:function(l){l.currentTarget.style.border="1px solid #d9d9d9",l.currentTarget.style.backgroundColor="#fafafa"},onMouseLeave:function(l){l.currentTarget.style.border="1px solid transparent",l.currentTarget.style.backgroundColor="transparent"},children:t.note?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u{1F4DD}"}),(0,e.jsx)("span",{children:t.note})]}):(0,e.jsx)("span",{children:"\u6DFB\u52A0\u5907\u6CE8..."})})})})]})}),o&&(0,e.jsx)("div",{style:{width:"100%",height:"1px"}})]},t.id)}}):(0,e.jsx)(re.Z,{description:(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)("p",{style:{marginBottom:"8px",color:"#8c8c8c"},children:"\u4ECA\u5929\u90FD\u6CA1\u6709\u5F85\u529E\u4EFB\u52A1\u5594\uFF5E"}),(0,e.jsxs)(E.ZP,{type:"primary",onClick:xe,children:[(0,e.jsx)(w.Z,{})," \u6DFB\u52A0\u4E0B\u4EFB\u52A1\u5427"]})]}),image:re.Z.PRESENTED_IMAGE_SIMPLE,style:{margin:"40px 0"}})]}):(0,e.jsx)(ne.Z,{children:(0,e.jsx)(Ce.Z,{locale:z.Z,dateCellRender:tt,onSelect:nt})})}),(0,e.jsx)(Me.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.Z,{})," \u6DFB\u52A0\u65B0\u4EFB\u52A1"]}),open:Ze,onCancel:function(){return R(!1)},footer:null,children:(0,e.jsxs)(_.Z,{form:J,layout:"vertical",onFinish:Ne,initialValues:{priority:"medium",date:C()()},children:[(0,e.jsx)(_.Z.Item,{name:"title",label:"\u4EFB\u52A1\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u6807\u9898"}],children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u6807\u9898",maxLength:50})}),(0,e.jsx)(_.Z.Item,{name:"description",label:"\u4EFB\u52A1\u63CF\u8FF0",children:(0,e.jsx)(Ie,{placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u63CF\u8FF0\uFF08\u9009\u586B\uFF09",autoSize:{minRows:3,maxRows:6},maxLength:200})}),(0,e.jsx)(_.Z.Item,{name:"date",label:"\u5F00\u59CB\u65E5\u671F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65E5\u671F"}],children:(0,e.jsx)(oe.default,{style:{width:"100%"},locale:z.Z,allowClear:!1})}),(0,e.jsx)(_.Z.Item,{name:"priority",label:"\u4F18\u5148\u7EA7",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7"}],children:(0,e.jsxs)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7",children:[(0,e.jsx)(N,{value:"high",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)("span",{children:[m.high.emoji," \u9AD8\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:m.high.color,children:"\u7D27\u6025"})]})}),(0,e.jsx)(N,{value:"medium",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)("span",{children:[m.medium.emoji," \u4E2D\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:m.medium.color,children:"\u91CD\u8981"})]})}),(0,e.jsx)(N,{value:"low",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)("span",{children:[m.low.emoji," \u4F4E\u4F18\u5148\u7EA7"]}),(0,e.jsx)(T.Z,{color:m.low.color,children:"\u666E\u901A"})]})})]})}),(0,e.jsx)(_.Z.Item,{name:"note",label:"\u5907\u6CE8",children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF08\u9009\u586B\uFF09",maxLength:100})}),(0,e.jsx)(_.Z.Item,{style:{marginBottom:0,textAlign:"right"},children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(E.ZP,{onClick:function(){return R(!1)},children:"\u53D6\u6D88"}),(0,e.jsx)(E.ZP,{type:"primary",htmlType:"submit",children:"\u6DFB\u52A0"})]})})]})})]})}},53579:function(De,A,n){n.d(A,{l:function(){return h},p:function(){return I}});var W=n(95688),u=n.n(W),U=n(79810),B=n.n(U),K=n(76069),D=n.n(K),b=n(52926);function I(f){return O.apply(this,arguments)}function O(){return O=D()(u()().mark(function f(j){return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,b.request)("/api/todo/get",B()({method:"POST"},j||{})));case 1:case"end":return g.stop()}},f)})),O.apply(this,arguments)}function h(f,j){return i.apply(this,arguments)}function i(){return i=D()(u()().mark(function f(j,v){return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,b.request)("/api/todo/save",B()({method:"POST",headers:{"Content-Type":"application/json"},data:j},v||{})));case 1:case"end":return _.stop()}},f)})),i.apply(this,arguments)}}}]);
