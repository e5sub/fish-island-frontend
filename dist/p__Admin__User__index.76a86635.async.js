"use strict";(self.webpackChunkreact_frontend_init=self.webpackChunkreact_frontend_init||[]).push([[7971],{53888:function(ye,L,r){r.r(L),r.d(L,{default:function(){return fe}});var J=r(84136),$=r.n(J),Q=r(57566),v=r.n(Q),X=r(52487),b=r.n(X),q=r(90785),T=r.n(q),x=r(67524),U=r(62743),_=r(82257),p=r(68872),z=r(17788),S=r(67294),s=r(85893),ee=function(){var M=b()(v()().mark(function l(o){var c;return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,x.T4)(o);case 4:return c(),p.ZP.success("\u521B\u5EFA\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),c(),p.ZP.error("\u521B\u5EFA\u5931\u8D25\uFF0C"+e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}},l,null,[[1,9]])}));return function(o){return M.apply(this,arguments)}}(),ne=function(l){var o=l.visible,c=l.columns,f=l.onSubmit,e=l.onCancel;return(0,s.jsx)(z.Z,{destroyOnClose:!0,title:"\u521B\u5EFA",open:o,footer:null,onCancel:function(){e==null||e()},children:(0,s.jsx)(U.Z,{type:"form",columns:c,onSubmit:function(){var y=b()(v()().mark(function R(g){var d;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,ee(g);case 2:d=C.sent,d&&(f==null||f(g));case 4:case"end":return C.stop()}},R)}));return function(R){return y.apply(this,arguments)}}()})})},re=ne,ae=function(){var M=b()(v()().mark(function l(o){var c;return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.ZP.loading("\u6B63\u5728\u66F4\u65B0"),e.prev=1,e.next=4,(0,x.dj)(o);case 4:return c(),p.ZP.success("\u66F4\u65B0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),c(),p.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C"+e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}},l,null,[[1,9]])}));return function(o){return M.apply(this,arguments)}}(),te=function(l){var o=l.oldData,c=l.visible,f=l.columns,e=l.onSubmit,y=l.onCancel;return o?(0,s.jsx)(z.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:c,footer:null,onCancel:function(){y==null||y()},children:(0,s.jsx)(U.Z,{type:"form",columns:f,form:{initialValues:o},onSubmit:function(){var R=b()(v()().mark(function g(d){var Z;return v()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ae($()($()({},d),{},{id:o.id}));case 2:Z=j.sent,Z&&(e==null||e(d));case 4:case"end":return j.stop()}},g)}));return function(g){return R.apply(this,arguments)}}()})}):(0,s.jsx)(s.Fragment,{})},ue=te,le=r(51042),ie=r(90930),se=r(78957),G=r(71471),oe=r(86738),de=r(83622),ce=r(95914),Y=r.n(ce),ve=function(){var l=(0,S.useState)(!1),o=T()(l,2),c=o[0],f=o[1],e=(0,S.useState)(!1),y=T()(e,2),R=y[0],g=y[1],d=(0,S.useRef)(),Z=(0,S.useState)(),C=T()(Z,2),j=C[0],N=C[1],H=(0,_.useLocation)(),me=(0,S.useState)([]),K=T()(me,2),D=K[0],E=K[1],he=(0,S.useState)([]),W=T()(he,2),F=W[0],A=W[1];(0,S.useEffect)(function(){var u=H.search;if(u){var a=u.split("="),i=a[1],t=Y()().format("YYYY-MM-DD"),m=Y()().startOf("month").format("YYYY-MM-DD"),h=Y()().endOf("month").format("YYYY-MM-DD");switch(i){case"1":E([t,t]);break;case"2":A([t,t]);break;case"3":A([m,h]);break}}},[H.search]);var pe=function(){var u=b()(v()().mark(function a(i){var t,m;return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=p.ZP.loading("\u6B63\u5728\u5220\u9664"),i){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,(0,x.Hh)({id:i.id});case 6:return t(),p.ZP.success("\u5220\u9664\u6210\u529F"),d==null||(m=d.current)===null||m===void 0||m.reload(),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(3),t(),p.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C"+n.t0.message),n.abrupt("return",!1);case 17:case"end":return n.stop()}},a,null,[[3,12]])}));return function(i){return u.apply(this,arguments)}}(),O=[{title:"id",dataIndex:"id",valueType:"text",hideInForm:!0},{title:"\u8D26\u53F7",dataIndex:"userAccount",valueType:"text"},{title:"\u7528\u6237\u540D",dataIndex:"userName",valueType:"text"},{title:"\u5934\u50CF",dataIndex:"userAvatar",valueType:"image",fieldProps:{width:64},hideInSearch:!0},{title:"\u7B80\u4ECB",dataIndex:"userProfile",valueType:"textarea"},{title:"\u6743\u9650",dataIndex:"userRole",valueEnum:{user:{text:"\u7528\u6237"},admin:{text:"\u7BA1\u7406\u5458"}}},{title:"\u6CE8\u518C\u65F6\u95F4",dataIndex:"createTimeRange",valueType:"dateRange",hideInTable:!0,hideInForm:!0,fieldProps:{value:D==null?void 0:D.map(function(u){return Y()(u)}),onChange:function(a){if(a){var i=a.map(function(n){return n.format("YYYY-MM-DD")}),t=T()(i,2),m=t[0],h=t[1];E([m,h]),setTimeout(function(){var n;return(n=d.current)===null||n===void 0?void 0:n.reload()},0)}}}},{title:"\u6CE8\u518C\u65F6\u95F4",sorter:!0,dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTimeRange",valueType:"dateRange",hideInTable:!0,hideInForm:!0,fieldProps:{value:F==null?void 0:F.map(function(u){return Y()(u)}),onChange:function(a){if(a){var i=a.map(function(n){return n.format("YYYY-MM-DD")}),t=T()(i,2),m=t[0],h=t[1];A([m,h]),setTimeout(function(){var n;return(n=d.current)===null||n===void 0?void 0:n.reload()},0)}}}},{title:"\u66F4\u65B0\u65F6\u95F4",sorter:!0,dataIndex:"updateTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(a,i){return(0,s.jsxs)(se.Z,{size:"middle",children:[(0,s.jsx)(G.Z.Link,{onClick:function(){N(i),g(!0)},children:"\u4FEE\u6539"}),(0,s.jsx)(oe.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u7528\u6237\u5417\uFF1F",onConfirm:function(){return pe(i)},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,s.jsx)(G.Z.Link,{type:"danger",children:"\u5220\u9664"})})]})}}];return(0,s.jsxs)(ie._z,{children:[(0,s.jsx)(U.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:d,rowKey:"key",search:{labelWidth:120,defaultCollapsed:!1},onReset:function(){E([]),A([])},toolBarRender:function(){return[(0,s.jsxs)(de.ZP,{type:"primary",onClick:function(){f(!0)},children:[(0,s.jsx)(le.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var u=b()(v()().mark(function a(i,t,m){var h,n,B,k,V,I,w;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return B=(h=Object.keys(t))===null||h===void 0?void 0:h[0],k=(n=t==null?void 0:t[B])!==null&&n!==void 0?n:void 0,D&&(i.createTimeRange=D),F&&(i.updateTimeRange=F),P.next=6,(0,x.D1)($()($()({},i),{},{sortField:B,sortOrder:k},m));case 6:return V=P.sent,I=V.data,w=V.code,P.abrupt("return",{success:w===0,data:(I==null?void 0:I.records)||[],total:Number(I==null?void 0:I.total)||0});case 10:case"end":return P.stop()}},a)}));return function(a,i,t){return u.apply(this,arguments)}}(),columns:O}),(0,s.jsx)(re,{visible:c,columns:O,onSubmit:function(){var a;f(!1),(a=d.current)===null||a===void 0||a.reload()},onCancel:function(){f(!1)}}),(0,s.jsx)(ue,{visible:R,columns:O,oldData:j,onSubmit:function(){var a;g(!1),N(void 0),(a=d.current)===null||a===void 0||a.reload()},onCancel:function(){g(!1)}})]})},fe=ve}}]);
